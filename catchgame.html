<!DOCTYPE html>
<html>
<head>
  <title>Catching Game</title>
  <style>
    body {
      background: #0a0a20;
      color: #ffb3ff;
      font-family: "Courier New", monospace;
      margin: 0;
      overflow: hidden;
      text-align: center;
    }

    h1 {
      color: #cc99ff;
      text-shadow: 0 0 4px #ff99cc, 0 0 8px #cc99ff;
      padding: 1em;
    }

    #nav {
      margin-bottom: 1em;
    }

    #nav a {
      display: inline-block;
      margin: 0.5em;
      padding: 0.4em 1em;
      border: 1px solid #cc99ff;
      border-radius: 6px;
      background: #110033;
      color: #cc99ff;
      text-decoration: none;
      font-weight: bold;
      text-shadow: 0 0 2px #ff99cc;
      transition: all 0.25s ease-in-out;
    }

    #nav a:hover {
      background: #cc99ff;
      color: #110033;
      box-shadow: 0 0 8px #ff99cc, 0 0 16px #cc99ff;
    }

    #scoreboard {
      font-size: 1.2rem;
      margin-bottom: 1em;
      text-shadow: 0 0 4px #ff99cc;
    }

    #highScores {
      position: fixed;
      top: 1em;
      right: 1em;
      background: #111033;
      border: 1px solid #cc99ff;
      border-radius: 10px;
      padding: 1em;
      box-shadow: 0 0 12px #ff99cc, 0 0 24px #cc99ff inset;
      text-align: left;
    }

    #highScores h2 {
      margin-top: 0;
      color: #cc99ff;
      text-shadow: 0 0 4px #ff99cc;
      font-size: 1rem;
    }

    #highScores ul {
      margin: 0;
      padding-left: 1em;
      list-style: none;
    }

    .falling-word {
      position: absolute;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      user-select: none;
      text-shadow: 0 0 2px #ff99cc, 0 0 6px #cc99ff;
      transition: transform 0.1s;
    }

    .good { color: #aaffaa; text-shadow: 0 0 4px #88ff88; }
    .bad { color: #ff5555; text-shadow: 0 0 4px #ff8888; }
  </style>
</head>
<body>
<h1>✨ Chloe’s Catching Game ✨</h1>

<div id="nav">
  <a href="index.html">Home</a>
  <a href="aboutmepage.html">About Me</a>
  <a href="sparklepage.html">My Thoughts</a>
  <a href="Chat.html">Chat</a>
  <a href="buildastory.html">Build A Story</a>
  <a href="Tinyworlds.html">Tiny Worlds</a>
  <a href="ambient.html">Ambient glow</a>
  <a href="flappy.html">Flappy Circle</a>


</div>

<div id="scoreboard">Score: 0</div>

<div id="highScores">
  <h2>Top Scores</h2>
  <ul id="highScoreList"></ul>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getDatabase, ref, push, onValue, query, orderByChild, limitToLast } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

// --- Firebase ---
const firebaseConfig = {
  apiKey: "AIzaSyDFdFgheOQf7yks_uUMEnpJn1-RFCEv24s",
  authDomain: "chloe-chat-c15fb.firebaseapp.com",
  projectId: "chloe-chat-c15fb",
  storageBucket: "chloe-chat-c15fb.firebasestorage.app",
  messagingSenderId: "138132282670",
  appId: "1:138132282670:web:ff46d0101153240cbf2ebf"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const scoresRef = ref(db, "catchGameScores");

// --- Password & usernames ---
const USER_PASSWORDS = { "Chloe": "cholera", "Mckenna": "microwave", "Krishivaa": "mr.maker" };
const USER_COLORS = { "Chloe": "#ff99cc", "Mckenna": "#33ff77", "Krishivaa": "#ffffff" };

// Ask for username
let username = prompt("Enter your username (Chloe / Mckenna / Krishivaa):");
while(!USER_PASSWORDS[username]){
  username = prompt("Invalid username! Try: Chloe / Mckenna / Krishivaa");
}

// Ask for personal password
let personalPass = prompt("Enter your personal password:");
if(personalPass !== USER_PASSWORDS[username]){
  document.body.innerHTML = "<h1>❌ Wrong personal password ❌</h1><p>Reload to try again.</p>";
  throw new Error("Wrong personal password");
}

// --- Game ---
let score = 0;
const goodWords = ["Fun!", "Coffee", "Curious", "Tiny joy", "Yes", "Weird"];
const badWords = ["Oops", "Lost", "Chaos", "Nope", "Bad", "Crash"];
let gameWidth = window.innerWidth;
let gameHeight = window.innerHeight;

function createWord() {
  const word = document.createElement("span");
  const isGood = Math.random() < 0.6;
  word.classList.add("falling-word", isGood ? "good" : "bad");
  word.textContent = isGood
    ? goodWords[Math.floor(Math.random() * goodWords.length)]
    : badWords[Math.floor(Math.random() * badWords.length)];

  word.style.left = Math.random() * (gameWidth - 100) + "px";
  word.style.top = "-30px";

  document.body.appendChild(word);

  const speed = 2 + Math.random() * 3;
  const fallInterval = setInterval(() => {
    const currentTop = parseFloat(word.style.top);
    if(currentTop > gameHeight) { word.remove(); clearInterval(fallInterval); }
    else { word.style.top = currentTop + speed + "px"; }
  }, 16);

  word.addEventListener("click", () => {
    score += isGood ? 10 : -5;
    document.getElementById("scoreboard").textContent = "Score: " + score;
    push(scoresRef, { username: username, score: score, color: USER_COLORS[username], timestamp: Date.now() });
    word.remove();
    clearInterval(fallInterval);
  });
}

setInterval(createWord, 500);
window.addEventListener("resize", () => { gameWidth = window.innerWidth; gameHeight = window.innerHeight; });

// --- High scores ---
const topScoresQuery = query(scoresRef, orderByChild("score"), limitToLast(5));
onValue(topScoresQuery, (snapshot) => {
  const scores = [];
  snapshot.forEach(child => scores.push(child.val()));
  scores.sort((a,b)=>b.score - a.score);
  const list = document.getElementById("highScoreList");
  list.innerHTML = "";
  scores.forEach(entry => {
    const li = document.createElement("li");
    li.textContent = entry.username + ": " + entry.score;
    li.style.color = entry.color;
    list.appendChild(li);
  });
});
</script>
</body>
</html>


