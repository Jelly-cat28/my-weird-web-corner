<!DOCTYPE html>
<html>
<head>
  <title>Ghost Flappy üëª</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: linear-gradient(#e8ddff, #f7efff);
      font-family: "Courier New", monospace;
    }

#navBar {
  position: fixed;
  top: 10px;
  right: 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  z-index: 20;
}

#navBar a {
  background: #fff6fb;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 0.85rem;
  color: #6b4b8a;
  text-decoration: none;
  border: 1px solid #d8b3ff;
  box-shadow: 0 0 6px #fff0ff;
  transition: 0.25s;
}

#navBar a:hover {
  background: #e7d4ff;
  color: #4b2f6b;
}


<div id="navBar">
    <a href="Chat.html">Come chat! ‚ú®</a>    
    <a href="index.html">Back 2 Home üè†</a>
    <a href="sparklepage.html">See my thoughts ‚ú®</a>
    <a href="catchgame.html">Catching Game</a>
    <a href="buildastory.html">Build A Story</a>
    <a href="Tinyworlds.html">Tiny Worlds</a>
    <a href="ambient.html">Ambient glow</a>
    <a href="aboutmepage.html">About me</a>

</div>


    #gameCanvas {
      display: block;
      margin: 0 auto;
      background: rgba(255,255,255,0.2);
    }

    #score {
      position: fixed;
      top: 15px;
      left: 15px;
      font-size: 1.4rem;
      color: #6b4b8a;
      font-weight: bold;
      text-shadow: 0 0 6px #ffffff;
      z-index: 10;
    }

    #highscoreDisplay {
      position: fixed;
      top: 45px;
      left: 15px;
      font-size: 1.1rem;
      color: #6b4b8a;
      font-weight: bold;
      text-shadow: 0 0 6px #ffffff;
      z-index: 10;
    }
  </style>
</head>
<body>

<div id="score">Score: 0</div>
<div id="highscoreDisplay">High Score: 0</div>

<canvas id="gameCanvas" width="420" height="600"></canvas>

<div id="navBar">
  <a href="index.html">üè° Home</a>
  <a href="Tinyworlds.html">üå∏ Tiny Worlds</a>
  <a href="buildastory.html">üìñ Build a story</a>
  <a href="sparklepage.html"> My thoughts</a>
  <a href="Chat.html"> Come chat</a>
  <a href="catchgame.html"> Catching game</a>
  <a href="ambient.html">Ambient spirals</a>
</div>


<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let ghost = {
  x: 80,
  y: 250,
  radius: 20,
  velocity: 0
};

// --- High Score ---
let highScore = parseInt(localStorage.getItem("ghostHighScore")) || 0;
document.getElementById("highscoreDisplay").textContent = "High Score: " + highScore;

let gravity = 0.35;
let flapStrength = -6;
let pipes = [];
let pipeGap = 140;
let pipeWidth = 50;
let frame = 0;
let score = 0;
let gameOver = false;

// --- Draw glowing circle ---
function drawGlowCircle(x, y, r, color) {
  let gradient = ctx.createRadialGradient(x, y, r * 0.3, x, y, r);
  gradient.addColorStop(0, "blue");
  gradient.addColorStop(1, color);

  ctx.beginPath();
  ctx.fillStyle = gradient;
  ctx.arc(x, y, r, 0, Math.PI * 2);
  ctx.fill();
}

// --- Spawn pipes ---
function spawnPipes() {
  let topHeight = Math.random() * 120 + 30; // safe range

  pipes.push({
    x: canvas.width,
    top: topHeight,
    bottom: topHeight + pipeGap
  });
}

// --- Update ---
function update() {
  if (gameOver) return;

  ghost.velocity += gravity;
  ghost.y += ghost.velocity;

  frame++;
  if (frame % 100 === 0) spawnPipes();

  pipes.forEach(pipe => pipe.x -= 2);

  // Passed a pipe
  if (pipes.length && pipes[0].x < -pipeWidth) {
    pipes.shift();
    score++;
    document.getElementById("score").textContent = "Score: " + score;

    // high score update
    if (score > highScore) {
      highScore = score;
      localStorage.setItem("ghostHighScore", highScore);
      document.getElementById("highscoreDisplay").textContent = "High Score: " + highScore;
    }
  }

  // Collision
  for (let p of pipes) {
    if (ghost.x + ghost.radius > p.x &&
        ghost.x - ghost.radius < p.x + pipeWidth) {

      if (ghost.y - ghost.radius < p.top || 
          ghost.y + ghost.radius > p.bottom) {
        endGame();
      }
    }
  }

  // Ceiling / floor
  if (ghost.y < ghost.radius || ghost.y > canvas.height - ghost.radius) {
    endGame();
  }
}

// --- Draw ---
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawGlowCircle(ghost.x, ghost.y, ghost.radius, "#d7b3ff");

  pipes.forEach(p => {
    // top pipe circle
    drawGlowCircle(p.x + pipeWidth/2, p.top/2, p.top/2, "#c9a4ff");
    // bottom pipe circle
    let bottomHeight = canvas.height - p.bottom;
    drawGlowCircle(p.x + pipeWidth/2, p.bottom + bottomHeight/2, bottomHeight/2, "#c9a4ff");
  });
}

// --- Loop ---
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();

// --- Controls ---
function flap() {
  if (gameOver) return window.location.reload();
  ghost.velocity = flapStrength;
}

document.addEventListener("keydown", e => {
  if (e.code === "Space") flap();
});
document.addEventListener("mousedown", flap);

// --- Game Over ---
function endGame() {
  gameOver = true;

  ctx.font = "32px Courier New";
  ctx.fillStyle = "#6b4b8a";
  ctx.textAlign = "center";
  ctx.fillText("GAME OVER", canvas.width/2, canvas.height/2 - 20);

  ctx.font = "20px Courier New";
  ctx.fillText("Click or press Space to restart", canvas.width/2, canvas.height/2 + 20);
}
</script>

</body>
</html>

